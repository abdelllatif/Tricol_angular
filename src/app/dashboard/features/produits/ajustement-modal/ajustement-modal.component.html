<div class="fixed inset-0 bg-black/60 flex items-center justify-center z-50" (click)="close.emit()">
  <div class="bg-white/95 backdrop-blur-lg rounded-3xl shadow-2xl p-8 max-w-md w-full mx-8" (click)="$event.stopPropagation()">
    <h2 class="text-2xl font-black mb-6">Ajuster Stock - {{ produit.nom }}</h2>

    <form (ngSubmit)="onSubmit()" class="space-y-6">
      <div>
        <label class="block font-semibold text-gray-700 mb-2">Stock actuel: {{ produit.stockActuel }}</label>
      </div>

      <div>
        <label class="block font-semibold text-gray-700 mb-2">Type mouvement</label>
        <select [(ngModel)]="ajustementData.typeMouvement" name="type" required
                class="w-full px-5 py-3 rounded-xl border border-gray-300 focus:border-blue-600">
          <option value="ENTREE">Entrée (+)</option>
          <option value="SORTIE">Sortie (-)</option>
          <option value="AJUSTEMENT">Ajustement (=)</option>
        </select>
      </div>

      <div *ngIf="ajustementData.typeMouvement === 'ENTREE'">
        <label class="block font-bold text-green-700 mb-2">Coût unitaire MAD *</label>
        <input [(ngModel)]="ajustementData.coutUnitaire" name="coutUnitaire" type="number" step="0.01" required
               class="w-full px-5 py-3 rounded-xl border-2 border-green-300 focus:border-green-600 bg-green-50">
      </div>

      <div>
        <label class="block font-semibold text-gray-700 mb-2">Quantité</label>
        <input [(ngModel)]="ajustementData.quantite" name="quantite" type="number" min="1" required
               class="w-full px-5 py-3 rounded-xl border border-gray-300 focus:border-blue-600">
      </div>

      <div>
        <label class="block font-semibold text-gray-700 mb-2">Motif (optionnel)</label>
        <input [(ngModel)]="ajustementData.motif" name="motif" type="text"
               class="w-full px-5 py-3 rounded-xl border border-gray-300 focus:border-blue-600">
      </div>

      <div class="flex justify-end space-x-4">
        <button type="button" (click)="close.emit()" class="px-8 py-3 rounded-xl border border-gray-300">Annuler</button>
        <button type="submit" class="px-8 py-3 rounded-xl bg-purple-600 text-white hover:bg-purple-700">Ajuster</button>
      </div>
    </form>
  </div>
</div>
